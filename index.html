<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Startseite</title>
    <style>
      button {
        margin: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Willkommen auf unserer Website!</h1>
    <h2 id="welcome-message"></h2>

    <button onclick="window.location.href='./login.html';">Anmelden</button>
    <button onclick="window.location.href='./register.html';">Registrieren</button>
    <button onclick="window.location.href='./booking.html';">Buchungen</button>
    <button onclick="window.location.href='./account.html';">Benutzerkonto</button>
    <button id="logout-button">Abmelden</button>

    <script src="./utils.js" type="module"></script>
    <script src="./getCurrentUser.js" type="module"></script>
    <script src="./logout.js" type="module"></script>
    <script type="module">
      import { getCurrentUser } from "./getCurrentUser.js";
      import { logout } from "./logout.js";

      document.addEventListener("DOMContentLoaded", async () => {
        const user = await getCurrentUser();
        const welcomeMessageElement =
          document.getElementById("welcome-message");
        if (user) {
          welcomeMessageElement.textContent = `Willkommen, ${user.username}!`;
        } else {
          welcomeMessageElement.textContent = "Bitte melden Sie sich an.";
        }
      });

      document
        .getElementById("logout-button")
        .addEventListener("click", logout);
    </script>
  </body>
</html>
